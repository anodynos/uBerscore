<!--
$ gr urequire:nodejsCompileAndCopy
$ browserify ./build/nodejsCompileAndCopy/uberscore.js -o ./build/uberscore-browserify.js -i util -i lodash
-->

<!DOCTYPE html>
<html>
  <head>
    <!--<meta charset="utf-8">-->
    <title>
      test: `uberscore-min.js` & `spec_combined/index-combined.js`: 'combined' & 'optimized', loader: '&ltscript/&gt'
    </title>
  </head>

  <body>
    <h1>test: uberscore & spec: 'combined' & 'optimized', loader: '&ltscript/&gt' }</h1>

    <h1> `uberscore-min.js` & `spec_combined/index-combined.js`</h1>
    <h2> template: 'combined' (r.js/almondjs + uRequire mini-runtime) </h2>

    <h3> Loader: "'&ltscript/&gt'"</h3>

    <strong> ** uRequire note: **</strong>
    <ul>
      <li>uberscore-min.js is loaded as a simple &ltscript/&gt, WITHOUT any trace of RequireJs loader or configuration!
      <li>Dependencies (eg. `lodash` or `underscore`) must be &ltscript/&gt loaded BEFORE it, exposing the global '_',
          which is then acquired by `uRequire`'s special build with `combined` template.
    </ul>

    <link rel="stylesheet" href="../../bower_components/mocha/mocha.css" />
    <div id="mocha"></div>
  </body>

  <!--We load our 'dependencies' first, exposing globals (eg '_')-->
  <script src="../../bower_components/lodash/dist/lodash.min.js"></script>
  <!--<script src="../../bower_components/underscore/underscore-min.js"></script>-->

  <script src="../../bower_components/mocha/mocha.js"></script>
  <script src="../../bower_components/chai/chai.js"></script>

  <script>
    mocha.setup('bdd');
  </script>

  <script>
    // lets create two globals, that will be 'hijacked' by uberscore when its loaded.
    // Then we can test `noConflict()`
    window._B = "Old global `_B`";
    window.uberscore = "Old global `uberscore`";
  </script>

  <!-- Loading as plain JS: it rootExports `uberscore` & `_B` as window/global vars -->
  <script src="../../build/uberscore-browserify.js"></script>
  <!--<script src="../../build/urequiredFromNode.js"></script>-->

  <!--load all your specs here, in a uRequire 'combined' .js -->
  <script src="../../build/spec_combined/index-combined.js"></script>

  <script>
    // once unit-tests are loaded, hit mocha.run()
    if (!window.PHANTOMJS) {
      mocha.run().globals([//'_',
                           //'_B',
                           'Firebug',         // needed for chrome
                           'XMLHttpRequest',  // needed for chrome
                           'console'          // needed for chrome
      ]);
    }
  </script>
</html>