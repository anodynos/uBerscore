/* uberscore 0.0.8 (2013-05-11), git://github.com/anodynos/uBerscore
agelos.pikoulas@gmail.com, Lisense: MIT*/

var VERSION='0.0.8';

/**
 * almond 0.2.5 Copyright (c) 2011-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

!function(){var e="function"==typeof define&&define.amd,t="object"==typeof exports,r=!t,n=null,i=function(){};t?(i=require,n=global):n=window,factory=function(){var e,o,s;return function(t){function r(e,t){return m.call(e,t)}function n(e,t){var r,n,i,o,s,u,l,a,c,p,d=t&&t.split("/"),f=y.map,h=f&&f["*"]||{};if(e&&"."===e.charAt(0))if(t){for(d=d.slice(0,d.length-1),e=d.concat(e.split("/")),a=0;a<e.length;a+=1)if(p=e[a],"."===p)e.splice(a,1),a-=1;else if(".."===p){if(1===a&&(".."===e[2]||".."===e[0]))break;a>0&&(e.splice(a-1,2),a-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((d||h)&&f){for(r=e.split("/"),a=r.length;a>0;a-=1){if(n=r.slice(0,a).join("/"),d)for(c=d.length;c>0;c-=1)if(i=f[d.slice(0,c).join("/")],i&&(i=i[n])){o=i,s=a;break}if(o)break;!u&&h&&h[n]&&(u=h[n],l=a)}!o&&u&&(o=u,s=l),o&&(r.splice(0,s,o),e=r.join("/"))}return e}function i(e,r){return function(){return f.apply(t,B.call(arguments,0).concat([e,r]))}}function u(e){return function(t){return n(t,e)}}function l(e){return function(t){b[e]=t}}function a(e){if(r(v,e)){var n=v[e];delete v[e],x[e]=!0,d.apply(t,n)}if(!r(b,e)&&!r(x,e))throw new Error("No "+e);return b[e]}function c(e){var t,r=e?e.indexOf("!"):-1;return r>-1&&(t=e.substring(0,r),e=e.substring(r+1,e.length)),[t,e]}function p(e){return function(){return y&&y.config&&y.config[e]||{}}}var d,f,h,g,b={},v={},y={},x={},m=Object.prototype.hasOwnProperty,B=[].slice;h=function(e,t){var r,i=c(e),o=i[0];return e=i[1],o&&(o=n(o,t),r=a(o)),o?e=r&&r.normalize?r.normalize(e,u(t)):n(e,t):(e=n(e,t),i=c(e),o=i[0],e=i[1],o&&(r=a(o))),{f:o?o+"!"+e:e,n:e,pr:o,p:r}},g={require:function(e){return i(e)},exports:function(e){var t=b[e];return"undefined"!=typeof t?t:b[e]={}},module:function(e){return{id:e,uri:"",exports:b[e],config:p(e)}}},d=function(e,n,o,s){var u,c,p,d,f,y,m=[];if(s=s||e,"function"==typeof o){for(n=!n.length&&o.length?["require","exports","module"]:n,f=0;f<n.length;f+=1)if(d=h(n[f],s),c=d.f,"require"===c)m[f]=g.require(e);else if("exports"===c)m[f]=g.exports(e),y=!0;else if("module"===c)u=m[f]=g.module(e);else if(r(b,c)||r(v,c)||r(x,c))m[f]=a(c);else{if(!d.p)throw new Error(e+" missing "+c);d.p.load(d.n,i(s,!0),l(c),{}),m[f]=b[c]}p=o.apply(b[e],m),e&&(u&&u.exports!==t&&u.exports!==b[e]?b[e]=u.exports:p===t&&y||(b[e]=p))}else e&&(b[e]=o)},e=o=f=function(e,r,n,i,o){return"string"==typeof e?g[e]?g[e](r):a(h(e,r).f):(e.splice||(y=e,r.splice?(e=r,r=n,n=null):e=t),r=r||function(){},"function"==typeof n&&(n=i,i=o),i?d(t,e,r,n):setTimeout(function(){d(t,e,r,n)},4),f)},f.config=function(e){return y=e,y.deps&&f(y.deps,y.callback),f},s=function(e,t,n){t.splice||(n=t,t=[]),r(b,e)||r(v,e)||(v[e]=[e,t,n])},s.amd={jQuery:!0}}(),s("almond",function(){}),s("util",[],function(){return i("util")}),s("lodash",[],function(){return"undefined"!=typeof _?_:i("lodash")}),function(){s("agreement/isAgree",["require","exports","module","lodash","./isAgree"],function(e,t,r,n){var n;return n=e("lodash"),r.exports=function(e,t){return n.isRegExp(t)?t.test(e+""):n.isFunction(t)?t(e):void 0===t?!0:n.isEqual(e,t)?!0:e+""==t+""},r.exports})}(n),function(){s("type",["require","exports","module","lodash","./agreement/isAgree"],function(e,t,r,n){var i,n,o=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1};return n=e("lodash"),i=function(e,t){var r,o,s;null==t&&(t=!1),s=i.TYPES;for(r in s)if(o=s[r],n["is"+r](e))return t?o[0]:r;return"UNKNOWN"},i.toShort=function(e){var t,r,n;if(i.TYPES[e])return i.TYPES[e][0];n=i.TYPES;for(t in n)if(r=n[t],o.call(r,e)>=0)return r[0]},i.toLong=function(e){var t,r,n;if(i.TYPES[e])return e;n=i.TYPES;for(t in n)if(r=n[t],o.call(r,e)>=0)return t},i.areEqual=function(e,t){return i.toShort(e)===i.toShort(t)},i.isType=function(e){var t;return t=i.toLong(e),o.call(n.keys(i.TYPES),t)>=0},i.TYPES={Arguments:["args",".."],Array:["[]","A"],Function:["->","F"],String:["''","S",'""'],Date:["D"],RegExp:["//","R"],Number:["N"],Boolean:["B"],Object:["{}","O"],Null:["null","-"],Undefined:["U","?"]},r.exports=i,r.exports})}(n),function(){s("objects/getValueAtPath",["require","exports","module","lodash","../agreement/isAgree"],function(e,t,r,n){var i,o,n;return n=e("lodash"),i={separator:"/",stopKey:"#",terminateKey:void 0,defaultKey:"*",isReturnLast:!1},o=function(e,t,r){var o,s,u,l,a;if(null==r&&(r=i),r!==i&&n.defaults(r,i),!n.isArray(t)){if(!n.isString(t)){if(void 0===t)return e;throw"_B.getValueAtPath Error: invalid path: "+t}t=t.split(r.separator)}for(l=0,a=t.length;a>l;l++)if(s=t[l]){if(void 0!==e&&(o=e),!n.isObject(e)){e=void 0;break}if(r.terminateKey&&e[r.terminateKey]){u={},u[r.terminateKey]=e[r.terminateKey],e=u;break}if(void 0!==e[s])e=e[s];else{if(r.stopKey&&void 0!==e[r.stopKey]){e=e[r.stopKey];break}e=r.defaultKey&&e[r.defaultKey]?e[r.defaultKey]:void 0}}return void 0===e?r.isReturnLast?o:e:e},r.exports=o,r.exports})}(n),function(){s("collections/array/arrayize",["require","exports","module","lodash","../../agreement/isAgree"],function(e,t,r,n,i){var i,n;return n=e("lodash"),i=e("../../agreement/isAgree"),r.exports=function(e){return n.isArray(e)?e:n.isUndefined(e)||n.isNull(e)?[]:[e]},r.exports})}(n),function(){s("agreement/inAgreements",["require","exports","module","lodash","./isAgree","../collections/array/arrayize"],function(e,t,r,n,i){var o,s,i,n;return n=e("lodash"),i=e("./isAgree"),o=e("../collections/array/arrayize"),s=function(e,t){var r,s,u;if(t=o(t),n.isEmpty(t));else for(s=0,u=t.length;u>s;s++)if(r=t[s],i(e,r))return!0;return!1},r.exports=s,r.exports})}(n),function(){s("objects/setValueAtPath",["require","exports","module","lodash","../agreement/isAgree"],function(e,t,r,n){var i,n;return n=e("lodash"),i=function(e,t,r,i,o){var s,u,l,a,c;if(null==i&&(i=!1),null==o&&(o="/"),!n.isArray(t)){if(!n.isString(t))throw"_B.setValueAtPath Error: invalid path: "+t;t=t.split(o)}if(t=function(){var e,r,n;for(n=[],e=0,r=t.length;r>e;e++)u=t[e],u&&n.push(u);return n}(),!n.isObject(e))throw"_B.setValueAtPath Error: invalid object: "+e;for(l=a=0,c=t.length;c>a;l=++a){if(u=t[l],!n.isObject(e[u]))if(i)s={},!n.isUndefined(e[u])&&n.isString(i)&&(s[i]=e[u]),e[u]=s;else if(n.isUndefined(e[u]))return!1;l<t.length-1&&(e=e[u])}return e[u]=r,!0},r.exports=i,r.exports})}(n),function(){s("Logger",["require","exports","module","lodash","./agreement/isAgree","./agreement/inAgreements","./objects/setValueAtPath","./objects/getValueAtPath"],function(e,n,i,o){var s,u,l,a,o,c=[].slice;return o=e("lodash"),l=e("./agreement/inAgreements"),a=e("./objects/setValueAtPath"),u=e("./objects/getValueAtPath"),s=function(){function n(e,t,r){var i;this.levelPath=e,this.debugLevel=t,this.newLine=null!=r?r:!0,this.levelPaths=function(){var t,r,n,o;for(n=e.split("/"),o=[],t=0,r=n.length;r>t;t++)i=n[t],i&&o.push(i);return o}(),n.loggerCount=(n.loggerCount||0)+1}var i,s,p;n.prototype.prettify="undefined"!=typeof t&&null!==t&&t||"undefined"==typeof t||null===t?function(e){return function(t){var r;return r="[0m"+e(t,!1,null,!0),o.isArray(t)&&r.replace(/\n/g,""),l(t,[o.isObject])?r:t}}(e("util").inspect):function(e){return e},n.getALog=function(e,t,i){return function(){var o,s,u,l,a,c,p;s=function(){var e,t,r,n;for(r=Array.prototype.slice.call(arguments),n=[],e=0,t=r.length;t>e;e++)o=r[e],n.push(this.prettify(o));return n}.apply(this,arguments),a=""+(this.levelPath?"["+this.levelPath+"] ":"Logger"+n.loggerCount+" ")+e,a&&(a+=":"),s.unshift(a),"undefined"!=typeof r&&null!==r&&r||s.unshift(""+t),this.newLine&&s.unshift("\n"),"undefined"!=typeof r&&null!==r&&r||s.push("[0m"),i.apply(null,s);try{return s.join("")}catch(d){for(u=d,l="",c=0,p=s.length;p>c;c++)o=s[c],l+=Object.prototype.toString(o);return l}}},n.prototype.err=n.getALog("ERROR","[31m",console.error),n.prototype.log=n.getALog("","[0m",console.log),n.prototype.verbose=n.getALog("","[34m",console.log),n.prototype.ok=n.getALog("","[32m",console.log),n.prototype.warn=n.getALog("WARNING","[33m",console.log),n.prototype.debug=function(){var e;return e=n.getALog("DEBUG","[36m",console.log),function(){var t,r;return t=arguments[0],r=2<=arguments.length?c.call(arguments,1):[],o.isNumber(t)?r.unshift("("+t+")"):(r.unshift(t),t=this.lastDebugLevelCheck||1,r.unshift(this.lastDebugLevelCheck?"(?"+this.lastDebugLevelCheck+")":"(!1)")),t<=this.getEffectiveDebugLevel()&&e.apply(this,r),this.lastDebugLevelCheck=void 0}}(),n.prototype.getEffectiveDebugLevel=function(){var e;return e=this.getFederatedDebugLevel(),o.isUndefined(e)?this.debugLevel||0:0>=e?-1/0:o.max([e,this.debugLevel,0])},n.prototype.getFederatedDebugLevel=function(){return n.getStaticDebugLevel(this.levelPaths)},n.getStaticDebugLevel=function(e){var t,r,i;for(null==e&&(e=[]),r=o.clone(e),r.unshift("debugLevels"),i=u(n,r),t=r.pop();o.isUndefined(null!=i?i._value:void 0)&&t;)i=u(n,r),t=r.pop();return null!=i?i._value:void 0},n.setDebugLevel=function(e,t){var r;return a(n,"debugLevels/"+t+"/_value",e,r=!0)},n.prototype.deb=function(e){return e<=this.getEffectiveDebugLevel()?(this.lastDebugLevelCheck=e,!0):(this.lastDebugLevelCheck=void 0,!1)},n.logger=new n("DefaultLogger"),p=n.prototype;for(i in p)s=p[i],n[i]=o.isFunction(s)?o.bind(s,n.logger):s;return n}(),i.exports=s,i.exports})}(n),function(){s("blending/Blender",["require","exports","module","lodash","../agreement/isAgree","../type","../objects/getValueAtPath","../Logger"],function(e,t,r,n){var i,o,s,n,u=function(e,t){return function(){return e.apply(t,arguments)}},l=[].slice,a={}.hasOwnProperty;return n=e("lodash"),s=e("../type"),o=e("../objects/getValueAtPath"),i=function(){function t(){var r,i,o,s,a,c,p,d,f,h,g,b,v;o=1<=arguments.length?l.call(arguments,0):[],this.blenderBehaviors=o,this._blend=u(this._blend,this),this.blend=u(this.blend,this),this.getNextAction=u(this.getNextAction,this),this.getAction=u(this.getAction,this),(this._optionsList||(this._optionsList=[])).unshift(t.defaultOptions),this.l=new(e("../Logger"))("uberscore/Blender"),n.isArray(this.blenderBehaviors[0])&&(this.l.deb(20)&&this.l.debug("We might have options:",this.blenderBehaviors[1],"@_optionsList (defaults):",this._optionsList),this._optionsList.push(this.blenderBehaviors[1]),this.blenderBehaviors=this.blenderBehaviors[0]),this._optionsList.unshift(c={}),n.extend.apply(void 0,this._optionsList),this.l.debugLevel=c.debugLevel,this.l.deb(10)&&this.l.debug("Final blender options:",c),n.extend(this,c),delete this._optionsList,(this.defaultBlenderBehaviors||(this.defaultBlenderBehaviors=[])).push(t.behavior),a=n.last(this.defaultBlenderBehaviors);for(p in a)s=a[p],n.isUndefined(s["*"])&&(s["*"]||(s["*"]=a["*"]["*"]));for(b=this.defaultBlenderBehaviors,d=0,h=b.length;h>d;d++)r=b[d],this.blenderBehaviors.push(r);for(v=this.blenderBehaviors,i=f=0,g=v.length;g>f;i=++f)r=v[i],this.blenderBehaviors[i]=this.adjustBlenderBehavior(r);this.path=[]}return t.defaultOptions={inherited:!1,copyProto:!1,pathTerminator:"|",isExactPath:!0,pathSeparator:":",debugLevel:0},t.prototype.defaultBBOrder=["src","dst"],t.prototype.adjustBlenderBehavior=function(e){return e.order||(e.order=this.defaultBBOrder),this._adjustBbSrcDstPathSpec(e,e.order)},t.prototype._adjustBbSrcDstPathSpec=function(e,t){var r,i,o,u,l,a,c,p,d,f,h;if(t.length>0)if(r=t[0],"path"===r)for(o in e)if(d=e[o],o===this.pathTerminator)n.isPlainObject(d)&&this._adjustBbSrcDstPathSpec(d,t.slice(1));else{if(c=this.pathSeparator?function(){var e,t,r,n;for(r=o.split(this.pathSeparator),n=[],e=0,t=r.length;t>e;e++)a=r[e],a&&n.push(a.trim());return n}.call(this):[],c.length>1){for(u=e,i=f=0,h=c.length;h>f;i=++f)l=c[i],u[l]||(u[l]={}),i<c.length-1?u=u[l]:u[l]=d;delete e[o]}else c[0]&&o!==c[0]&&(e[c[0]]=d,delete e[o]);n.isPlainObject(d)&&this._adjustBbSrcDstPathSpec(d,t)}else for(o in e)d=e[o],s.isType(o)&&(p=s.toShort(o),p&&o!==p&&(e[p]=e[o],delete e[o])),n.isPlainObject(d)&&this._adjustBbSrcDstPathSpec(d,t.slice(1));return e},t.prototype.getAction=function(e,t){var r,i,o,s,u;for(null==t&&(t=this.currentBlenderBehaviorIndex),u=this.blenderBehaviors,i=o=0,s=u.length;s>o;i=++o)if(r=u[i],i>=t&&n.isFunction(r[e]))return r[e];if(n.isFunction(this[e]))return this[e];throw this.l.err("_B.Blender.blend: Error: Invalid BlenderBehavior `actionName` = ",e," - no Function by that name is found in a preceding BlenderBehavior or Blender it self."," belowBlenderBehaviorIndex="+t," @currentBlenderBehaviorIndex="+this.currentBlenderBehaviorIndex," @blenderBehaviors=",this.blenderBehaviors)},t.prototype.getNextAction=function(e,t,r){var i,s,u,l,a,c;for(s=e,c=e.order,l=0,a=c.length;a>l&&(i=c[l],void 0!==s&&!n.isString(s)&&!n.isFunction(s));l++){if(this.l.deb(80)&&this.l.debug("At bbOrder='"+i+"'","path"===i?" @path="+this.l.prettify(this.path):" bbOrderValues[bbOrder]='"+r[i]+"'"," currentBBSrcDstSpec =\n",s),n.isUndefined(r[i]))throw this.l.err("_.Blender.blend: Error: Invalid BlenderBehavior `order` '"+i+"',\nwhile reading BlenderBehavior #"+t+" :\n",this.blenderBehaviors[t],"\n\nDefault BlenderBehavior order is ",this.defaultBBOrder);"path"===i?(u=o(s,this.path.slice(1,+this.path.length+1||9e9),{terminateKey:this.isExactPath?void 0:this.pathTerminator}),n.isObject(u)&&(u=u["|"])):u=s[r[i]]||s["*"],this.l.deb(70)&&this.l.debug(70,function(){if(void 0===u)return"Found NO nextBBSrcDstSpec at all - go to NEXT BlenderBehavior";if("path"===i)return"Got out of the path, having something!";if(u===s[r[i]])return"Found ";if(u===s["*"])return"Found NOT exact nextBBSrcDstSpec, but a '*'";if(n.isString(u))return"Found a String ";if(n.isFunction(u))return"Found a Function ";throw"Unknown nextBBSrcDstSpec = "+this.l.prettify(u)}.call(this)," \nbbOrder='"+i+"'"," \nbbOrderValues[bbOrder]='"+r[i]+"'"," \nnextBBSrcDstSpec=\n",u),s=u}return s},t.prototype.blend=function(){var e,t,r,i,o,s;if(e=arguments[0],r=2<=arguments.length?l.call(arguments,1):[],n.isEmpty(this.path)){for((n.isUndefined(r)||n.isEmpty(r))&&(r=[e],e={}),t={$:e},this.dstRoot=e,o=0,s=r.length;s>o;o++)i=r[o],this.srcRoot=i,this._blend(t,{$:i});return t.$}return this._blend.apply(this,arguments)},t.prototype._blend=function(){var e,r,i,o,u,c,p,d,f,h,g,b,v,y,x,m,B,E,A,j;for(o=arguments[0],h=2<=arguments.length?l.call(arguments,1):[],(n.isUndefined(h)||n.isEmpty(h))&&(h=[o],o={}),y=0,B=h.length;B>y;y++)for(g=h[y],d=n.isArray(g)?function(){var e,t,r;for(r=[],c=e=0,t=g.length;t>e;c=++e)b=g[c],r.push(c);return r}():this.inherited?function(){var e;e=[];for(c in g)e.push(c);return e}():function(){var e;e=[];for(c in g)a.call(g,c)&&e.push(c);return e}(),x=0,E=d.length;E>x;x++){for(p=d[x],this.path.push(p),this.l.deb(50)&&this.l.debug("@path = /"+this.path.join("/")+"\n'"+s(o[p])+"'    <--  '"+s(g[p])+"'\n",o[p],"    <--  ",g[p]),v=!0,j=this.blenderBehaviors,i=m=0,A=j.length;A>m;i=++m)if(r=j[i],v&&(this.l.deb(60)&&this.l.debug("Currently at @blenderBehaviors["+i+"] =\n",r),u=this.getNextAction(r,i,{dst:s(o[p],!0),src:s(g[p],!0),path:this.path}),void 0!==u)){if(e=u,!n.isFunction(e)){if(!n.isString(e))throw this.l.err("_B.Blender.blend: Error: Invalid BlenderBehavior `action` (neither 'Function' nor 'String') : ",e);e=this.getAction(e,i)}this.currentBlenderBehaviorIndex=i,this.currentBlenderBehavior=this.blenderBehaviors[i],f=e(p,g,o,this),v=!1,f!==t.SKIP&&f!==t.NEXT&&f!==t.DELETE&&f!==t.DELETE_NEXT?(n.isArray(f)&&f[0]===t.NEXT&&(f=f[1],v=!0),this.l.deb(20)&&this.l.debug("Action Called - Value assigning:  @path =",this.path.join("/"),"\n  value =",this.l.prettify(f)),o[p]=f):(this.l.deb(30)&&this.l.debug("Action Called - ActionResult = ",f),(f===t.DELETE||f===t.DELETE_NEXT)&&delete o[p],(f===t.NEXT||f===t.DELETE_NEXT)&&(v=!0))}this.path.pop()}return o},t.SKIP={ActionResult:"SKIP"},t.NEXT={ActionResult:"NEXT"},t.DELETE={ActionResult:"DELETE"},t.DELETE_NEXT={ActionResult:"DELETE_NEXT"},t.prototype.overwrite=function(e,t){return t[e]},t.prototype.deepOverwrite=function(e,t,r,n){return n.copyProto&&(r[e].__proto__=t[e].__proto__),n.blend(r[e],t[e])},t.prototype.arrayAppend=function(e,t,r){var n,i,o,s;for(s=t[e],i=0,o=s.length;o>i;i++)n=s[i],r[e].push(n);return r[e]},t.behavior={order:["dst","src"],"*":{"*":"overwrite"},Array:{"[]":"deepOverwrite","{}":"deepOverwrite","->":"deepOverwrite"},"{}":{O:"deepOverwrite",Array:"deepOverwrite",Function:"deepOverwrite"},"->":{"{}":"deepOverwrite","[]":"deepOverwrite","->":"deepOverwrite"}},t}(),r.exports=i,r.exports})}(n),function(){s("blending/blenders/DeepCloneBlender",["require","exports","module","lodash","../../agreement/isAgree","../Blender","../../type"],function(e,t,r,n){var i,o,s,n,u={}.hasOwnProperty,l=function(e,t){function r(){this.constructor=e}for(var n in t)u.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},a=[].slice,c=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1};return n=e("lodash"),i=e("../Blender"),s=e("../../type"),o=function(e){function t(){var e;e=1<=arguments.length?a.call(arguments,0):[],this.blenderBehaviors=e,(this.defaultBlenderBehaviors||(this.defaultBlenderBehaviors=[])).push(t.behavior),(this._optionsList||(this._optionsList=[])).unshift({}),t.__super__.constructor.apply(this,arguments)}return l(t,e),t.behavior={order:["dst","src"],"*":{"[]":"deepCloneOverwrite","{}":"deepCloneOverwrite","->":"deepCloneOverwrite",Undefined:function(){return i.SKIP}},deepCloneOverwrite:function(e,t,r,n){var i,o,u;return u=s(t[e]),i=s(r[e]),i!==u&&(o=["Function","Object"],c.call(o,i)>=0&&c.call(o,u)>=0||(r[e]="Array"===u?[]:{})),n.deepOverwrite(e,t,r,n)}},t}(i),r.exports=o,r.exports})}(n),function(){s("blending/blenders/DeepExtendBlender",["require","exports","module","lodash","../../agreement/isAgree","../../Logger","../Blender"],function(e,t,r,n){var i,o,s,n,u={}.hasOwnProperty,l=function(e,t){function r(){this.constructor=e}for(var n in t)u.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},a=[].slice;return s=new(e("../../Logger"))("uberscore/DeepExtendBlender"),i=e("../Blender"),n=e("lodash"),o=function(e){function t(){var e;e=1<=arguments.length?a.call(arguments,0):[],this.blenderBehaviors=e,(this.defaultBlenderBehaviors||(this.defaultBlenderBehaviors=[])).push(this.DeepExtendBlenderBehavior),t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.DeepExtendBlenderBehavior={order:["src","dst"],String:{"*":"overwriteOrReplace"},Array:{"[]":function(e,t,r,i){return n.reject(i.deepOverwrite(e,t,r,i),function(e){return null===e||void 0===e})},"*":function(e,t,r){throw"deepExtend: Error: Trying to combine an array with a non-array.\n\nProperty: "+e+"\ndestination[prop]: "+s.prettify(r[e])+"\nsource[prop]: "+s.prettify(t[e])}},Object:{"{}":function(e,t,r,n){var i,o,s,u;u=i=n.getAction("deepOverwrite")(e,t,r,n);for(o in u)s=u[o],(null===s||void 0===s)&&delete i[o];return i},"*":function(e,t,r){throw"deepExtend: Error trying to combine a PlainObject with a non-PlainObject.\n\nProperty: "+e+"\ndestination[prop]: "+s.prettify(r[e])+"\nsource[prop]: "+s.prettify(t[e])}},overwriteOrReplace:function(e,t,r){var i;return i=/\${\s*?_\s*?}/,n.isString(t[e])&&i.test(t[e])?n.isString(r[e])?t[e].replace(i,r[e]):r[e]:t[e]}},t}(i),r.exports=o,r.exports})}(n),function(){s("blending/blenders/DeepDefaultsBlender",["require","exports","module","lodash","../../agreement/isAgree","../Blender","../../type","./DeepCloneBlender"],function(e,t,r,n){var i,o,s,u,n,l={}.hasOwnProperty,a=function(e,t){function r(){this.constructor=e}for(var n in t)l.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},c=[].slice;return n=e("lodash"),i=e("../Blender"),u=e("../../type"),o=e("./DeepCloneBlender"),s=function(e){function t(){var e;e=1<=arguments.length?c.call(arguments,0):[],this.blenderBehaviors=e,(this.defaultBlenderBehaviors||(this.defaultBlenderBehaviors=[])).push(t.behavior),(this._optionsList||(this._optionsList=[])).unshift({}),t.__super__.constructor.apply(this,arguments)}return a(t,e),t.behavior={order:["dst","src"],Undefined:function(){return i.NEXT},Null:function(){return i.NEXT},Object:{Object:function(){return i.NEXT},Function:function(){return i.NEXT},"*":function(){return i.SKIP}},Function:{Object:function(){return i.NEXT},Function:function(){return i.NEXT},"*":function(){return i.SKIP}},Array:{Array:function(){return i.NEXT},"*":function(){return i.SKIP}},"*":function(){return i.SKIP}},t}(o),r.exports=s,r.exports})}(n),function(){s("blending/deepExtend",["require","exports","module","lodash","../agreement/isAgree","../Logger"],function(e,t,r,n){var i,o,s,n,u=[].slice,l={}.hasOwnProperty;return n=e("lodash"),o=new(e("../Logger"))("uberscore/Blender"),s=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],i=function(){var e,t,r,s,a,c,p,d;for(e=arguments[0],a=2<=arguments.length?u.call(arguments,1):[],t=/\${\s*?_\s*?}/,p=0,d=a.length;d>p;p++){s=a[p];for(r in s)if(l.call(s,r))if(n.isUndefined(e[r]))e[r]=s[r];else if(n.isString(s[r])&&t.test(s[r]))n.isString(e[r])&&(e[r]=s[r].replace(t,e[r]));else if(n.isArray(e[r])||n.isArray(s[r])){if(!n.isArray(e[r])||!n.isArray(s[r]))throw"deepExtend: Error: Trying to combine an array with a non-array.\n\nProperty: "+r+"\ndestination[prop]: "+o.prettify(e[r])+"\nsource[prop]: "+o.prettify(s[r]);e[r]=n.reject(i(e[r],s[r]),function(e){return null===e||void 0===e})}else if(n.isPlainObject(e[r])||n.isPlainObject(s[r])){if(!n.isPlainObject(e[r])||!n.isPlainObject(s[r]))throw"deepExtend: Error trying to combine a PlainObject with a non-PlainObject.\n\nProperty: "+r+"\ndestination[prop]: "+o.prettify(e[r])+"\nsource[prop]: "+o.prettify(s[r]);e[r]=i(e[r],s[r])}else c=s[r],null!==c&&void 0!==c||!n.isPlainObject(e)?e[r]=c:delete e[r]}return e},r.exports=i,r.exports})}(n),function(){s("objects/okv",["require","exports","module","lodash","../agreement/isAgree"],function(e,t,r,n){var i,n,o=[].slice;return n=e("lodash"),i=function(){var e,t,r,i,s,u;if(i=arguments[0],r=2<=arguments.length?o.call(arguments,1):[],n.isObject(i)){for(e=s=0,u=r.length;u>s;e=s+=2)t=r[e],e+1<r.length&&(i[t]=r[e+1]);return i}return null},r.exports=i,r.exports})}(n),function(){s("collections/go",["require","exports","module","lodash","../agreement/isAgree"],function(e,t,r,n){var i,n,o=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1};return n=e("lodash"),i=function(e,t,r){var i,s,u,l,a,c,p,d,f,h,g,b,v,y;if(t&&(u=t.fltr,c=t.iter,b=t.sort,l=t.grab),a=!n.isArray(e),d=function(){return a?{}:[]},e=n.clone(e),h=null,f=function(){return h=void 0===l?d():n.isFunction(l)?d():n.isArray(l)?[]:n.isObject(l)?{}:n.isString(l)?"[]"===l||"array"===l||"Array"===l||"a"===l||"A"===l?[]:"{}"===l||"object"===l||"Object"===l||"o"===l||"O"===l?{}:d():d()},g=function(e,t){return n.isArray(h)?h.push(e):h[t]=e},s=function(t,r){return a&&(r=t,t=e[r]),[t,r]},void 0!==u&&(f(),n.each(e,function(t,i){var s;if(n.isFunction(u)){if(u.call(r,t,i,e))return g(t,i)}else if(a&&(n.isString(u)&&(u=[u]),n.isArray(u)&&o.call(function(){var e,t,r;for(r=[],e=0,t=u.length;t>e;e++)s=u[e],r.push(s.toString());return r}(),i)>=0))return g(t,i)}),e=h),void 0!==b&&(f(),p=[],n(e).map(function(e,t){return a?t:e}).sortBy(n.isFunction(b)?function(e,t){return b.apply(r,s(e,t))}:n.isString(b)?function(e){return e}:n.isBoolean(b)?b?function(){return!0}:function(){return!1}:b).each(function(e,t){return g.apply(null,s(e,t))}),e=h),n.isFunction(c)&&(void 0===b?n.each(e,function(t,n){return c.call(r,t,n,e)}):n.each(e,function(t,n){return c.call(r,t,n,e)})),l)if(n.isFunction(l))n.each(e,function(t,n){return l.call(r,t,n,e)});else if(n.isArray(l))for(v=0,y=e.length;y>v;v++)i=e[v],l.push(i);else n.isObject(l)&&n.extend(l,e);return e},r.exports=i,r.exports})}(n),function(){s("objects/mutate",["require","exports","module","lodash","../agreement/isAgree","../collections/go"],function(e,t,r,n,i){var o,i,s,n;return n=e("lodash"),i=e("../agreement/isAgree"),o=e("../collections/go"),s=function(e,t,r){return n.isFunction(t)&&o(e,{iter:function(n,o){return i(n,r)?e[o]=t(n):void 0}}),e},r.exports=s,r.exports})}(n),function(){s("objects/isDisjoint",["require","exports","module","lodash","../agreement/isAgree"],function(e,t,r,n){var i,n;return n=e("lodash"),i=function(e,t,r){var i;return null==r&&(r=function(e,t){return e===t}),i=!1,n.each(e,function(e){return n.any(t,function(t){return r(e,t)})?(i=!0,!1):void 0}),!i},r.exports=i,r.exports})}(n),function(){s("objects/getRefs",["require","exports","module","lodash","../agreement/isAgree"],function(e,t,r,n){var i,o,n,s={}.hasOwnProperty;return n=e("lodash"),o={deep:!1,inherited:!1},i=function(e,t,r){var u,l,a,c,p;for(null==t&&(t=o),null==r&&(r=[]),t!==o&&n.defaults(t,o),l=t.inherited?function(){var t;t=[];for(u in e)t.push(u);return t}():function(){var t;t=[];for(u in e)s.call(e,u)&&t.push(u);return t}(),c=0,p=l.length;p>c;c++)u=l[c],a=e[u],n.isObject(a)&&(r.push(a),t.deep&&i(a,t,r));return r},r.exports=i,r.exports})}(n),function(){s("objects/isRefDisjoint",["require","exports","module","lodash","../agreement/isAgree","./getRefs","./isDisjoint"],function(e,t,r,n){var i,o,s,u,n;return n=e("lodash"),i=e("./getRefs"),o=e("./isDisjoint"),u={deep:!1,inherited:!1},s=function(e,t,r){var s,l;return null==r&&(r=u),r!==u&&n.defaults(r,u),e===t?!1:(s=i(e,r),s.unshift(e),l=i(t,r),l.unshift(t),o(s,l))},r.exports=s,r.exports})}(n),function(){s("objects/getInheritedPropertyNames",["require","exports","module","lodash","../agreement/isAgree"],function(e,t,r,n){var i,n,o;return n=e("lodash"),i=function(e){return o(Object.getPrototypeOf(e))},o=function(e){var t;for(t=[];;){if(!e||void 0===e||n.isEmpty(e)&&!Object.getPrototypeOf(e))break;Object.getOwnPropertyNames(e).forEach(function(e){return-1===t.indexOf(e)&&"constructor"!==e?t.push(e):void 0}),e=Object.getPrototypeOf(e)}return t},r.exports=i,r.exports})}(n),function(){s("isPlain",["require","exports","module","lodash","./agreement/isAgree","./type"],function(e,t,r,n){var i,o,n,s=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1};return n=e("lodash"),o=e("./type"),i=function(e){var t;return t=o(e),s.call(i.PLAIN_TYPES,t)>=0},i.PLAIN_TYPES=["String","Date","RegExp","Number","Boolean","Null","Undefined"],r.exports=i,r.exports})}(n),function(){s("collections/array/isEqualArraySet",["require","exports","module","lodash","../../agreement/isAgree"],function(e,t,r,n){var i,n;return n=e("lodash"),i=function(e,t){return 0===n.difference(e,t).length?0===n.difference(t,e).length:!1},r.exports=i,r.exports})}(n),function(){s("objects/isEqual",["require","exports","module","lodash","../agreement/isAgree","../type","../isPlain","../collections/array/isEqualArraySet","../Logger"],function(e,t,r,n){var i,o,s,u,l,a,n,c=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1},p={}.hasOwnProperty;return n=e("lodash"),a=e("../type"),u=e("../isPlain"),o=e("../collections/array/isEqualArraySet"),l=new(e("../Logger"))("uberscore/isEqual",0),s={inherited:!1,exact:!1,exclude:["constructor"],functionAsObject:!1,allKeys:!1},i=function(e,t,r,d,f){var h,g,b,v,y,x,m,B,E,A,j,O;if(null==f&&(f=s),n.isPlainObject(r)&&n.isUndefined(d)&&f===s)for(f=n.clone(f,!0),O=n.keys(s),B=0,A=O.length;A>B;B++)x=O[B],f[x]||(f[x]=r[x]);if(f.callback&&(r=f.callback),f.thisArg&&(d=f.thisArg),f!==s&&n.defaults(f,s),n.isFunction(r)){if(y=r.apply(d,[e,t]),void 0!==y)return y?!0:!1}else r=void 0;if(l.deb(20)&&l.debug("options = ",f),g=a(e),v=a(t),!f.exact&&!f.inherited&&(n.isObject(e)||n.isObject(t))&&n.isEqual(e,t,r,d))return l.deb(40)&&l.debug("return true - non exact _.isEqual"),!0;if(e===t)return l.deb(40)&&l.debug("return true - a is b"),!0;if(u(e)||u(t)||n.isFunction(e)||n.isFunction(t))return l.deb(40)&&l.debug("return  _.isEqual a, b"),n.isEqual(e,t);if(f.inherited||f.exact){if(f.inherited?(h=function(){var t;t=[];for(x in e)c.call(f.exclude,x)<0&&t.push(x);return t}(),b=function(){var e;e=[];for(x in t)c.call(f.exclude,x)<0&&e.push(x);return e}()):(h=function(){var t;t=[];for(x in e)p.call(e,x)&&c.call(f.exclude,x)<0&&t.push(x);return t}(),b=function(){var e;e=[];for(x in t)p.call(t,x)&&c.call(f.exclude,x)<0&&e.push(x);return e}()),h.length!==b.length||!o(h,b))return!1;for(E=0,j=h.length;j>E;E++){if(m=h[E],f.exact&&e[m]!==t[m])return l.deb(40)&&l.debug("return false - exact ref not same"),!1;if(!n.isEqual(e[m],t[m],r,d)&&!i(e[m],t[m],r,d,f))return l.deb(40)&&l.debug("return false - not isEqual nested for prop =",m,"values = ",e[m],t[m]),!1}return l.deb(40)&&l.debug("return true - all properties considered true"),!0}return l.deb(40)&&l.debug("return false - nothing left to check!"),!1},r.exports=i,r.exports})}(n),function(){s("objects/isIqual",["require","exports","module","lodash","../agreement/isAgree","./isEqual"],function(e,t,r){var n,i;return n=e("./isEqual"),i=function(e,t,r,i,o){return null==o&&(o={}),o.inherited=!0,(o.exclude||(o.exclude=[])).push("constructor"),n.apply(void 0,[e,t,r,i,o])},r.exports=i,r.exports})}(n),function(){s("objects/isExact",["require","exports","module","lodash","../agreement/isAgree","./isEqual"],function(e,t,r){var n,i;return n=e("./isEqual"),i=function(e,t,r,i,o){return null==o&&(o={}),o.exact=!0,n.apply(void 0,[e,t,r,i,o])},r.exports=i,r.exports})}(n),function(){s("objects/isIxact",["require","exports","module","lodash","../agreement/isAgree","./isIqual"],function(e,t,r){var n,i;return n=e("./isIqual"),i=function(e,t,r,i,o){return null==o&&(o={}),o.exact=!0,n.apply(void 0,[e,t,r,i,o])},r.exports=i,r.exports})}(n),function(){s("certain",["require","exports","module","lodash","./agreement/isAgree"],function(e,t,r,n){var i,n;return n=e("lodash"),i=function(e,t,r,i){if(null==i&&(i=!1),!n.isPlainObject(e)&&!n.isFunction(e))throw"Error: _B.certain: o is neither an Object or Function.\no="+JSON.stringify(e,null,"");return n.isUndefined(t)&&(t="*"),function(o){var s,u,l;if(s=null!=(u=null!=(l=e[o])?l:e[t])?u:r,i&&n.isUndefined(s))throw"Error: _B.certain: defaultKey is undefined.\n  defaultVal is also undefined.\n  key='"+o+"' (o["+o+"] is obviously undefined too)\n  defaultKey='"+t+"'\n  o="+JSON.stringify(e,null,"");return s}},r.exports=i,r.exports})}(n),function(e){s("uberscore",["require","exports","module","lodash","./agreement/isAgree","./blending/Blender","./blending/blenders/DeepCloneBlender","./blending/blenders/DeepExtendBlender","./blending/blenders/DeepDefaultsBlender","./blending/deepExtend","./objects/okv","./objects/mutate","./objects/setValueAtPath","./objects/getValueAtPath","./objects/isDisjoint","./objects/isRefDisjoint","./objects/getRefs","./objects/getInheritedPropertyNames","./objects/isEqual","./objects/isIqual","./objects/isExact","./objects/isIxact","./collections/go","./collections/array/isEqualArraySet","./collections/array/arrayize","./agreement/inAgreements","./type","./isPlain","./Logger","./certain"],function(t,r,n,i,o){var s=function(e,t,r){var n;return n=function(){function t(){}return t.prototype.VERSION="undefined"==typeof VERSION||null===VERSION?"{NO_VERSION}":VERSION,t.prototype.Blender=e("./blending/Blender"),t.prototype.DeepCloneBlender=e("./blending/blenders/DeepCloneBlender"),t.prototype.DeepExtendBlender=e("./blending/blenders/DeepExtendBlender"),t.prototype.DeepDefaultsBlender=e("./blending/blenders/DeepDefaultsBlender"),t.prototype.deepExtend=e("./blending/deepExtend"),t.prototype.okv=e("./objects/okv"),t.prototype.mutate=e("./objects/mutate"),t.prototype.setValueAtPath=e("./objects/setValueAtPath"),t.prototype.getValueAtPath=e("./objects/getValueAtPath"),t.prototype.isDisjoint=e("./objects/isDisjoint"),t.prototype.isRefDisjoint=e("./objects/isRefDisjoint"),t.prototype.getRefs=e("./objects/getRefs"),t.prototype.getInheritedPropertyNames=e("./objects/getInheritedPropertyNames"),t.prototype.isEqual=e("./objects/isEqual"),t.prototype.isIqual=e("./objects/isIqual"),t.prototype.isExact=e("./objects/isExact"),t.prototype.isIxact=e("./objects/isIxact"),t.prototype.go=e("./collections/go"),t.prototype.isEqualArraySet=e("./collections/array/isEqualArraySet"),t.prototype.arrayize=e("./collections/array/arrayize"),t.prototype.isAgree=e("./agreement/isAgree"),t.prototype.inAgreements=e("./agreement/inAgreements"),t.prototype.type=e("./type"),t.prototype.isPlain=e("./isPlain"),t.prototype.Logger=e("./Logger"),t.prototype.certain=e("./certain"),t
}(),r.exports=new n,r.exports}(t,r,n,i,o),u=e._B,l=e.uberscore;return e._B=s,e.uberscore=s,s.noConflict=function(){return e._B=u,e.uberscore=l,s},s})}(n),o("uberscore")},e?define(["lodash"],factory):t?module.exports=factory():factory()}();